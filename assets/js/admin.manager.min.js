var NAILS_CDN_Manager;NAILS_CDN_Manager=function(t,e,n,i,a,c){var o=this;return o.handler=t,o.callback=e,o.passback=n,o.urlSchemes=i,o.isModal=a,o.reopenModal=c,o.__construct=function(){o.initSubmit(),o.initAlerts(),o.initUpload(),o.initInsert(),o.insertSearch();var t=!1;if("ckeditor"===o.handler)t=!0;else if(o.isModal)try{t="function"==typeof window.parent[o.callback[0]][o.callback[1]]?!0:!1}catch(e){t=!1}else if(window.opener)try{t="function"==typeof window.opener[o.callback[0]][o.callback[1]]?!0:!1}catch(e){t=!1}else t=!1;t||$("a.insert").remove(),$("a.cdn-fancybox").fancybox({padding:0,wrapCSS:"cdn-fancybox",helpers:{title:{type:"over"}}})},o.initSubmit=function(){$("form").on("submit",function(){o.showMask()})},o.initAlerts=function(){$("#alert .btn").on("click",function(){return o.hideAlert(),!1}),$(document).on("keydown",function(t){13===t.keyCode&&$("#alert:visible").length>0&&$("#alert .btn.ok").first().click(),27===t.keyCode&&$("#alert:visible").length>0&&$("#alert .btn.cancel").first().click()})},o.initUpload=function(){},o.initInsert=function(){$("a.insert").on("click",function(){var t=$(this).attr("data-file"),e=$(this).attr("data-id"),n=$(this).attr("data-bucket");return"ckeditor"===o.handler?o.insertCkeditor(n,t,e):o.insertNative(n,t,e),o.isModal?parent.$.fancybox.close():window.close(),!1})},o.insertCkeditor=function(t,e,n){var i=this.urlSchemes.serve,a=e.split("."),c={bucket:t,filename:a[0],extension:"."+a[1],id:n,width:0,height:0,sex:"",border:0},o=Mustache.render(i,c);window.opener.CKEDITOR.tools.callFunction(this.callback,o)},o.insertNative=function(t,e,n){this.isModal?window.parent[this.callback[0]][this.callback[1]].call(null,t,e,n,this.reopenModal,o.passback):window.opener[this.callback[0]][this.callback[1]].call(null,t,e,n,this.reopenModal,o.passback)},o.insertSearch=function(){$("#search-text").on("keyup",function(){return o.doSearch($(this).val()),!1})},o.doSearch=function(t){$("li.file,tr.file:not(.head)").each(function(){var e=new RegExp(t,"gi");e.test($(this).attr("data-title"))?$(this).show():$(this).hide()})},o.showMask=function(){$("#mask").show()},o.hideMask=function(){$("#mask").hide()},o.showAlert=function(){$("#alert").show()},o.hideAlert=function(){$("#alert").hide()},o.__construct()};
//# sourceMappingURL=admin.manager.min.js.map
